<link rel="import" href="../../../bower_components/polymer/polymer.html">
<link rel="import" href="../../../bower_components/etools-data-table/etools-data-table.html">

<link rel="import" href="../../behaviors/utils.html">
<link rel="import" href="../../styles/detail-table.html">
<link rel="import" href="disaggregation-table-cell.html">
<link rel="import" href="edit-disaggregation-table-cell.html">

<dom-module id="disaggregation-table-row">
  <template>

    <style include='detail-table'></style>
    <tr class='horizontal layout' id="[[type]]">

      <td class='flex cell border' id="[[data.id]]">
        [[_capitalizeFirstLetter(data.title)]]
      </td>

      <template is="dom-repeat"
                items="[[data.data]]">
        <td class='flex cell border'>

          <template is="dom-if" if="[[editable]]">
            <edit-disaggregation-table-cell value="[[item]]" col-index="[[index]]" row-index="[[rowIndex]]">
            </edit-disaggregation-table-cell>
          </template>

          <template is="dom-if" if="[[!editable]]">
            <disaggregation-table-cell value="[[item]]">
            </disaggregation-table-cell>
          </template>

        </td>
      </template>

      <td class='flex cell border'>
        [[total]] [[data.total.v]]
      </td>

    </tr>
  </template>

  <script>
    Polymer({
      is: 'disaggregation-table-row',

      behaviors: [
        App.Behaviors.UtilsBehavior,
      ],

      properties: {
        data: {
          type: Object,
          value: {}
        },
        editable: {
          type: Boolean,
          value: false
        },
        rowIndex: Number
      },

    });
  </script>
  </dom-module>
